# 从模板导入 - 快速使用指南

## 🎯 功能简介

"从模板导入"功能允许您从历史项目中快速导入评估数据，大大提升评估效率，避免重复填写。

## 📋 使用步骤

### 步骤 1: 访问新建评估页面

在浏览器中打开：
```
http://localhost:8000/assessment/new
```

或通过菜单导航：
```
评估管理 → 新建评估
```

### 步骤 2: 点击"从模板导入"按钮

在页面顶部统计卡片的右侧，您会看到一个蓝色的按钮：

```
┌─────────────────────────────────────────────────────┐
│  风险总分  评分因子  风险等级  已完成项  [从模板导入]  │
└─────────────────────────────────────────────────────┘
```

点击该按钮，打开模板选择弹窗。

### 步骤 3: 选择历史项目

弹窗中会显示所有历史项目的列表，包含以下信息：

| 项目名称 | 描述 | 类型 | 风险得分 | 总成本 | 创建时间 | 操作 |
|---------|------|------|---------|--------|---------|------|
| 电商平台开发 | 包含用户... | 项目 | 75.00 | 50.00万 | 2025-10-20 | [导入] |
| Web应用模板 | 标准企业... | 模板 | 60.00 | 30.00万 | 2025-10-18 | [导入] |

**提示**：
- 🔵 蓝色"模板"标签：表示这是一个标准模板项目
- ⚪ 灰色"项目"标签：表示这是一个普通项目

### 步骤 4: 导入数据

1. 浏览项目列表，找到您想要导入的项目
2. 点击该项目行最右侧的"导入"按钮
3. 系统会自动：
   - 关闭弹窗
   - 显示成功提示："已从项目"XXX"导入数据"
   - 填充所有评估数据到表单中
   - 更新顶部统计信息

### 步骤 5: 检查和调整数据

导入完成后，建议您：

1. **检查风险评分**（步骤1）
   - 查看各项风险评分是否符合当前项目
   - 根据实际情况调整评分

2. **检查工作量估算**（步骤2）
   - 查看新功能开发和系统对接工作量
   - 根据需要增删改工作量记录

3. **检查其他成本**（步骤3）
   - 确认差旅月数、人数
   - 确认运维月数、人数、日成本

4. **生成最终报价**（步骤4）
   - 点击"计算最新报价"
   - 查看详细成本分解

## 💡 使用技巧

### 技巧 1: 快速找到相似项目

在模板列表中，您可以：
- 查看"描述"列，了解项目内容
- 查看"风险得分"列，评估项目复杂度
- 查看"总成本"列，了解项目规模

### 技巧 2: 优先使用标准模板

带有蓝色"模板"标签的项目通常是：
- 经过验证的标准配置
- 数据更加规范和完整
- 适合作为新项目的起点

### 技巧 3: 分页查找

如果项目很多，可以：
- 使用底部分页器切换页面
- 点击"显示数量"选择每页显示条数（10/20/50/100）
- 查看右下角的总数："共 XX 个项目"

### 技巧 4: 导入后微调

导入是一个起点，不是终点：
1. 导入历史项目数据作为基础
2. 根据新项目的特点进行调整
3. 重新计算报价，查看影响
4. 保存新的评估结果

## ⚠️ 注意事项

### 数据覆盖警告

**重要**：导入操作会**完全覆盖**当前表单中已填写的所有数据！

如果您已经填写了部分数据，导入前请：
- 确认是否真的要导入（当前版本无确认提示）
- 考虑先保存当前进度
- 或者不使用导入，继续手动填写

### 编辑模式限制

当您在编辑现有项目时：
```
/assessment/new?edit_id=123
```

模板列表中**不会显示**当前正在编辑的项目（ID=123），这是为了防止：
- 循环导入
- 数据混淆
- 意外覆盖

### 配置兼容性

导入的数据基于**当前系统配置**：

- **角色配置**：如果系统角色发生变化，工作量表中的角色列可能不匹配
- **风险项配置**：如果风险评分项发生变化，评分结果可能需要调整

建议：导入后检查配置兼容性，必要时手动调整。

## 🔧 故障排除

### 问题 1: 点击按钮无反应

**可能原因**：
- 后端服务未启动
- 网络连接问题

**解决方案**：
1. 检查后端服务是否运行：`http://localhost:3001`
2. 查看浏览器控制台是否有错误信息
3. 刷新页面重试

### 问题 2: 列表为空

**可能原因**：
- 数据库中没有历史项目
- 数据库连接失败

**解决方案**：
1. 先创建一些项目并保存
2. 检查数据库文件是否存在：`server/ppa.db`
3. 运行数据库初始化：`cd server && node init-db.js`

### 问题 3: 导入后数据不对

**可能原因**：
- 源项目数据格式异常
- JSON 解析失败

**解决方案**：
1. 查看控制台错误信息
2. 尝试导入其他项目
3. 手动填写数据而不使用导入

### 问题 4: 导入提示失败

**可能原因**：
- 网络请求超时
- 项目数据损坏

**解决方案**：
1. 刷新页面重试
2. 更换其他项目导入
3. 联系技术支持

## 📊 实际案例

### 案例 1: 快速复制年度运维项目

**场景**：每年需要评估相似的运维项目

**操作**：
1. 选择去年的运维项目作为模板
2. 导入数据
3. 只调整运维月数（12个月 → 12个月）
4. 重新计算报价

**效果**：从 30 分钟缩短到 5 分钟！

### 案例 2: 基于标准模板创建新项目

**场景**：公司有标准的 Web 应用开发模板

**操作**：
1. 从模板列表选择"标准 Web 应用模板"
2. 导入基础配置
3. 根据新项目需求调整：
   - 增加特定功能模块
   - 调整风险评分
   - 更新差旅和运维参数
4. 生成最终报价

**效果**：确保评估标准一致，减少遗漏！

### 案例 3: 快速对比不同方案

**场景**：为客户提供多个报价方案

**操作**：
1. 导入基础方案
2. 保存为"方案 A"
3. 再次导入同一模板
4. 调整部分参数
5. 保存为"方案 B"
6. 在历史记录中对比两个方案

**效果**：快速生成多个方案，便于决策！

## 📖 相关文档

- **功能详细说明**: `docs/prd/template-import-feature.md`
- **测试用例**: `docs/tests/template-import-test-cases.md`
- **开发记录**: `docs/bugfix/sprint-11-template-import-feature.md`

## 🎉 开始使用

现在就试试这个强大的功能吧！

1. 打开新建评估页面
2. 点击"从模板导入"
3. 选择一个历史项目
4. 开始高效的评估工作！

---

**最后更新**: 2025-10-22  
**版本**: v1.0
